import{g as R}from"./chunks/index.8dd3f9f1.js";import{E as C}from"./chunks/index.2782c9c1.js";import{f as E,r as g,e as A,D as p,h as f,i as S,G as e,B as s,z as o,u as G,k as i,t as k,A as y,C as H,M as q,N as J,_ as K}from"./chunks/framework.1a1d6641.js";import"./chunks/theme.4626986d.js";import"./chunks/isIndex.22f73de1.js";import"./chunks/isObject.df4d31a6.js";import"./chunks/isSymbol.4ef48d1d.js";const x=m=>(q("data-v-c6a4b4c7"),m=m(),J(),m),Q={class:"max-w-4xl mx-auto pt-30"},W={class:"flex items-center justify-center gap-2"},X=x(()=>o("div",{class:"el-upload__text"},[i(" 将目录或多个文件拖到此处, 或"),o("em",{class:"ml-1"},"点击上传")],-1)),Y=x(()=>o("div",{class:"el-upload__text",style:{"margin-top":"10px"}}," 支持的文件类型: jpg、jpeg、bmp、webp、gif、png、xml、word、pdf ",-1)),Z=x(()=>o("div",{class:"el-upload__text pt-2"}," 单个文件不超过1GB ",-1)),L={class:"pt-4 pb-6"},ee={class:""},te={class:"flex justify-between"},le={class:"flex gap-3"},ae=x(()=>o("div",{class:"el-table__empty-block"},[o("div",{class:"pt-8 pb-3"},[o("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},[o("g",{transform:"translate(0 1)",fill:"none","fill-rule":"evenodd"},[o("ellipse",{fill:"#f5f5f5",cx:"32",cy:"33",rx:"32",ry:"7"}),o("g",{"fill-rule":"nonzero",stroke:"#d9d9d9"},[o("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),o("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:"#fafafa"})])])]),i(" 暂无数据 ")])],-1)),se=E({__name:"upload",setup(m){const v=g(),u=g([]),h=g([]),b=g(0),w=g(0);A(()=>u.value,l=>z(l));const B=()=>{var l;if(((l=u.value)==null?void 0:l.length)<=0){C({message:"文件上传列表为空，请选择唔要上传的文件",type:"warning"});return}v.value.submit()},T=(l,a)=>{a.value=a},$=(l,a)=>{a.value=a},I=(l,a,t)=>{t.forEach(c=>{if(a.uid===c.uid&&(c.status!=="success"||c.status!=="fail")){const d=l.loaded/l.total*100|0;c.num=d,d===100&&w.value++}}),t.value=t},M=(l,a,t)=>{t.value=t},D=()=>C({message:"服务器连接失败，请检查网络重新上传",type:"error"}),N=()=>{v.value.$el.querySelector("input[type=file]").click()},U=()=>{u.value=[],h.value=[],b.value=0,w.value=0},V=(l,a)=>{const t=u.value;a.status==="uploading"&&(console.info(`取消上传：${a.name}`),v.value.abort(a.raw),t.forEach(c=>{c.uid===a.uid&&(c.status="ready")})),u.value=t,z(u.value)},j=l=>u.value.splice(l,1);function z(l){h.value=[];let a=0;l.forEach(t=>{const c=Object.assign({},t);c.type=t.name.substring(t.name.lastIndexOf("."),t.name.length),c.sizeStr=`${Math.round(t.size/1024)}KB`,h.value.push(c),a+=t.size}),b.value=Math.round(a/(1024*1024)*100)/100}return(l,a)=>{const t=p("el-icon"),c=p("ElUpload"),d=p("ElButton"),r=p("ElTag"),_=p("ElTableColumn"),P=p("ElProgress"),F=p("ElTable");return f(),S("div",Q,[e(c,{ref_key:"uploadRef",ref:v,class:"upload-demo",action:"http://localhost:8686/file/upload","on-remove":$,"on-progress":I,"on-change":T,"on-success":M,"on-error":D,"file-list":u.value,"auto-upload":!1,"show-file-list":!0,drag:"",multiple:""},{default:s(()=>[o("div",W,[e(t,{class:"!text-60px !text-[#909399] mb-2"},{default:s(()=>[e(G(R))]),_:1}),X]),Y,Z]),_:1},8,["file-list"]),o("div",L,[e(d,{size:"small",type:"primary",onClick:N},{default:s(()=>[i(" 选取文件 ")]),_:1}),e(d,{style:{"margin-left":"10px"},size:"small",type:"primary",onClick:B},{default:s(()=>[i(" 上传到服务器 ")]),_:1})]),o("div",ee,[o("div",te,[o("div",le,[e(r,null,{default:s(()=>{var n;return[i("文件数量："+k((n=h.value)==null?void 0:n.length)+"个",1)]}),_:1}),e(r,{type:"info"},{default:s(()=>[i(" 总大小："+k(b.value)+"M ",1)]),_:1}),e(r,{type:"success"},{default:s(()=>[i(" 成功上传："+k(w.value)+"个 ",1)]),_:1})]),e(d,{type:"danger",size:"small",onClick:U},{default:s(()=>[i(" 清空上传列表 ")]),_:1})]),e(F,{data:h.value,class:"mt-4","cell-style":{textAlign:"center"},stripe:""},{empty:s(()=>[ae]),default:s(()=>[e(_,{prop:"name",label:"文件名"}),e(_,{prop:"type",label:"类型",width:"80"}),e(_,{prop:"sizeStr",label:"大小"}),e(_,{prop:"status",label:"状态",width:"120"},{default:s(n=>[n.row.status==="ready"?(f(),y(r,{key:0,size:"mini"},{default:s(()=>[i(" 待上传 ")]),_:1})):n.row.status==="uploading"?(f(),y(r,{key:1,type:"warning",size:"mini"},{default:s(()=>[i(" 上传中 ")]),_:1})):n.row.status==="fail"?(f(),y(r,{key:2,type:"danger",size:"mini"},{default:s(()=>[i(" 上传失败 ")]),_:1})):n.row.status==="success"?(f(),y(r,{key:3,type:"success",size:"mini"},{default:s(()=>[i(" 上传成功 ")]),_:1})):H("",!0)]),_:1}),e(_,{label:"进度",width:"120"},{default:s(n=>[e(P,{"text-inside":!0,"stroke-width":15,percentage:n.row.num},null,8,["percentage"])]),_:1}),e(_,{label:"操作"},{default:s(n=>[e(d,{type:"danger",class:"el-icon-close",size:"mini",disabled:n.row.status!=="uploading",title:"取消上传",onClick:O=>V(n.$index,n.row)},null,8,["disabled","onClick"]),e(d,{type:"danger",class:"el-icon-delete",size:"mini",title:"删除文件",onClick:O=>j(n.$index)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])])])}}});const oe=K(se,[["__scopeId","data-v-c6a4b4c7"]]),fe=JSON.parse('{"title":"","description":"","frontmatter":{"layout":false},"headers":[],"relativePath":"pages/upload.md","lastUpdated":1696236510000}'),ne={name:"pages/upload.md"},me=E({...ne,setup(m){return(v,u)=>(f(),S("div",null,[e(oe)]))}});export{fe as __pageData,me as default};
