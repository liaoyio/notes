import{f as _,r as y,D as r,h as p,i as g,G as l,B as c,k as v,u as w,a1 as f,z as k,F as C,af as P,ak as z,o as B,al as D,A as b}from"./chunks/framework.9399b50c.js";import{u as q}from"./chunks/index.79e732d9.js";import{c as S,n as U,e as M,d as A}from"./chunks/noMoreClick.7cca1d1a.js";const T=_({__name:"FileFullUpload",emits:["refresh"],setup(h,{emit:d}){const e=y(!1),n=y(null),m=u=>{const a=u.target;if(!a.files)return;e.value=!0;const o=a.files[0],t=new FormData;t.append("file",o),S(t).then(()=>{d("refresh")}).finally(()=>{t.delete("file"),e.value=!1})};return(u,a)=>{const o=r("el-button");return p(),g(C,null,[l(o,{disabled:e.value,type:"primary",icon:w(q),onClick:a[0]||(a[0]=t=>{var s;return(s=n.value)==null?void 0:s.click()})},{default:c(()=>[v(" 上传文件 ")]),_:1},8,["disabled","icon"]),f(k("input",{ref_key:"inp",ref:n,type:"file",onChange:m},null,544),[[P,!1]])],64)}}}),$={class:"max-w-5xl mx-auto pt-20"},I={class:"flex flex-row-reverse mt-3"},V="http://124.222.108.118:8075/ufile/",L=_({__name:"FileFull",setup(h){const d=U,e=z({list:[],total:0,loaded:!1,queryParams:{pageNum:1,pageSize:10,orderByDto:[{num:0,field:"createTime",isAsc:!1}]}}),n=()=>{e.loaded=!1,M(e.queryParams).then(a=>{e.list=a.rows,e.total=a.total,e.loaded=!0})};B(()=>n());const m=({column:a,prop:o,order:t})=>{t?e.queryParams.orderByDto=[{num:0,field:o,isAsc:t==="ascending"}]:e.queryParams.orderByDto.splice(e.queryParams.orderByDto.findIndex(s=>s.field===o),1),n()},u=a=>{A(V+a.fileNewName,a.fileName)};return(a,o)=>{const t=r("el-table-column"),s=r("el-button"),x=r("el-table"),F=r("el-pagination"),N=D("loading");return p(),g("div",$,[l(T,{onRefresh:n}),f((p(),b(x,{class:"mt-4",data:e.list,stripe:"",onSortChange:m},{default:c(()=>[l(t,{prop:"id",label:"id","min-width":"200"}),l(t,{prop:"fileName",label:"原文件名","min-width":"200"}),l(t,{prop:"fileNewName",label:"现文件名","min-width":"360"}),l(t,{prop:"fileMd5",label:"文件MD5","min-width":"300"}),l(t,{prop:"remark",label:"备注","min-width":"200"}),l(t,{prop:"whetherFirst",center:"",sortable:"custom",label:"是否第一上传人","min-width":"200"}),l(t,{prop:"createBy",label:"createBy","min-width":"200"}),l(t,{prop:"createTime",sortable:"custom",label:"上传日期","min-width":"200"}),l(t,{fixed:"right",label:"操作","min-width":"120"},{default:c(({row:i})=>[f((p(),b(s,{link:"",type:"primary",size:"small",onClick:j=>u(i)},{default:c(()=>[v(" 下载 ")]),_:2},1032,["onClick"])),[[w(d)]])]),_:1})]),_:1},8,["data"])),[[N,!e.loaded]]),k("div",I,[l(F,{"current-page":e.queryParams.pageNum,"onUpdate:currentPage":o[0]||(o[0]=i=>e.queryParams.pageNum=i),"page-size":e.queryParams.pageSize,"onUpdate:pageSize":o[1]||(o[1]=i=>e.queryParams.pageSize=i),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:n,onCurrentChange:n},null,8,["current-page","page-size","total"])])])}}}),O=JSON.parse('{"title":"大文件分片上传","description":"简单文件上传示例","frontmatter":{"layout":false,"title":"大文件分片上传","description":"简单文件上传示例"},"headers":[],"relativePath":"pages/upload-full.md","lastUpdated":1696236510000}'),R={name:"pages/upload-full.md"},H=_({...R,setup(h){return(d,e)=>(p(),g("div",null,[l(L)]))}});export{O as __pageData,H as default};
